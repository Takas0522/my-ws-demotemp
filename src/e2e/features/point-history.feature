# language: ja
機能: ポイント履歴表示機能
  ユーザーとして
  ポイントの獲得・使用履歴を確認したい
  ポイントの取引状況を把握し、有効期限を管理するために

  背景:
    前提 ログインページを表示している
    かつ ユーザーIDに "tanaka_taro" を入力する
    かつ パスワードに "password123" を入力する
    かつ ログインボタンをクリックする
    かつ アカウントページにリダイレクトされる
    かつ ポイント詳細ボタンをクリックする
    かつ ポイントページにリダイレクトされる
    かつ ポイント履歴ボタンをクリックする
    かつ ポイント履歴ページにリダイレクトされる

  シナリオ: ポイント履歴ページの表示確認
    ならば ページタイトルが "ポイント履歴" と表示される
    かつ 現在のポイント残高が表示される
    かつ ポイント履歴一覧が表示される
    かつ 戻るボタンが表示される
    かつ ログアウトボタンが表示される

  シナリオ: ポイント履歴の内容確認
    ならば ポイント履歴に "新規登録ボーナス" が含まれている
    かつ ポイント履歴に "購入特典" が含まれている
    かつ 現在のポイント残高が "1500" と表示される

  シナリオ: ポイント履歴の取引タイプ表示
    ならば ポイント履歴に "EARN" タイプの取引が表示される
    かつ 各履歴に金額が表示される
    かつ 各履歴に取引日時が表示される
    かつ 各履歴に有効期限が表示される

  シナリオ: ページネーション機能の確認
    ならば ページ情報が表示される
    かつ 現在のページが "1" と表示される

  シナリオ: ポイントページへの戻る機能
    もし 戻るボタンをクリックする
    ならば ポイントページにリダイレクトされる

  シナリオ: ログアウト機能
    もし ログアウトボタンをクリックする
    ならば ログインページにリダイレクトされる

  シナリオ: 未認証時のポイント履歴ページアクセス
    もし localStorageのトークンをクリアする
    かつ ポイント履歴ページに直接アクセスする
    ならば ログインページにリダイレクトされる

  シナリオアウトライン: 複数のユーザーのポイント履歴を確認できる
    もし 戻るボタンをクリックする
    かつ アカウントボタンをクリックする
    かつ ログアウトボタンをクリックする
    かつ ユーザーIDに "<ユーザーID>" を入力する
    かつ パスワードに "<パスワード>" を入力する
    かつ ログインボタンをクリックする
    かつ ポイント詳細ボタンをクリックする
    かつ ポイント履歴ボタンをクリックする
    ならば ポイント履歴ページにリダイレクトされる
    かつ ポイント履歴一覧が表示される
    かつ 現在のポイント残高が "<ポイント>" と表示される

    例:
      | ユーザーID     | パスワード     | ポイント |
      | suzuki_hanako | password123   | 3200    |
      | yamada_jiro   | password123   | 500     |
      | sato_yuki     | password123   | 2100    |

  シナリオ: ポイント使用履歴の確認
    もし 戻るボタンをクリックする
    かつ アカウントボタンをクリックする
    かつ ログアウトボタンをクリックする
    かつ ユーザーIDに "suzuki_hanako" を入力する
    かつ パスワードに "password123" を入力する
    かつ ログインボタンをクリックする
    かつ ポイント詳細ボタンをクリックする
    かつ ポイント履歴ボタンをクリックする
    ならば ポイント履歴ページにリダイレクトされる
    かつ ポイント履歴に "USE" タイプの取引が表示される
    かつ ポイント履歴に "商品購入" が含まれている
