# 4.モダナイゼーションの実施と動作検証

## このチャレンジで体験できること

* Planモードを使用したアップグレードプラン構築
* Agentを使用した開発
* (Opt)IssueへのCopilotの割り当て作業の実施


> [!NOTE]
> 途中から参加する場合は `challenge4` ブランチに切り替えてください。

## 目的

Javaのアップグレードを実施します。
* Opt1:Planモードでアップデートプランを作成し実施する
* Opt2:GitHub Copilot App Modernizationを使用する

## 手順(Opt.1)

1. Planモードを使用し現状解析とアップデートプランの作成をOpenQuestionで深堀しながら行います

``` markdown
アプリケーションをJava11からJava21にアップデートする予定です。
現在のアプリケーションとDevContainerの状態を解析し、アップデートが可能かどうか、またどのような工程でアップデートを実施するべきか、また各工程でどのようなCriteriaのもとで作業するべきかPlanを構築してください。
解析の際に不明点、深堀が必要な点がでてきたらOpen Question形式で質問を行ってください。
<!-- 以下自由に設定してください -->
- ふるまいが変わっていないことを担保したいです。test-reports内にあるテストの結果から悪化しないように構成します
- 各サービスごとにアップデートを実施し変更内容をレビューしたいです。ふるまいの変更などは自動テストで担保するため検証工程は不要です。
  - 手作業での検証フェーズは最終工程で実施する想定です
- DevContainerで使用されているDockerやDockercomposeの内容で変更が必要な箇所あれば変更してください
- 各工程の中でデバッグ実行等に必要なコマンドが変更された場合はREADMEやCucumberテストの事前実行スクリプトなどの変更を行ってください
```

> [!TIP]
> 調査タスクが生えそうなプランだった場合調査内容を各Issueに反映してみたいなことを依頼してもいいかもしれません。

2. タスクの作成

手順パターン①：Issueの現物を作成するパターン

> [!NOTE]
> Forkなどを行わず、ローカルでのみ実行確認をする必要がありそうな場合はこちら

``` markdown
生成されたプランを、開発者やAIが実行可能な粒度のIssueに分割します。
Issue同士の依存関係がわかるように記載をして下さい。

分割したIssueをMarkdownで `docs/modern/` ディレクトリ内にIssueごとに保存してください。
順序が重要であるため、ファイル名で順序がわかるようにしてください。
```

手順パターン②:ghコマンドを使用してIssueを直接作成するパターン

> [!NOTE]
> Forkなどをして、Copilotに作業をアサインしてみたい場合はこちらのパターン

``` markdown
生成されたプランを、開発者やAIが実行可能な粒度のIssueに分割します。
モダナイゼーション作業のメインIssueと、それに紐づくSub-Issueの構造で作成します。

分割されたIssueをghコマンドを使用して登録してください。
IssueとSub-Issue、Sub-Issue同士の依存関係がわかるように記載をする必要があります。
ghコマンドを使用し適切なIssue番号が記載されるようにしてください。
```

3. モダナイゼーションの実行

Coding AgentへのCopilotのアサイン

or

``` markdown
`{タスクのMDファイル}` の作業を実行してください
```

4. ドキュメントやDocker構造の変更

``` markdown
変更された内容をベースにドキュメントやDevContainerの構造で変更が必要な箇所を修正してください。
```

# App modernization拡張機能を利用する場合

拡張機能はすでにインストール済みなので、App Modernizationから下記の工程で実施をしてみてください。

1. App Modernization拡張機能でアセスメントを行います
2. Assesmentの結果をもとにアップグレード計画を構築します
3. JavaのRuntime+SDKのアップデートを行います

> [!CAUTION]
> モダナイゼーション作業も比較的時間がかかる可能性があるので、時間に間に合いそうにない場合は `challenge5` ブランチに切り替えてください。