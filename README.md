# ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

Java 11 + Payara + PostgreSQL + Vue 3 ã§æ§‹ç¯‰ã•ã‚ŒãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¼šå“¡ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã¨èªè¨¼æ©Ÿèƒ½ã‚’æŒã¤ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¨ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ã‚’ç¢ºèªã§ãã¾ã™ã€‚

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚  Vue 3 + Tailwind CSS (Port: 3000)
â”‚  (Vue 3)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     BFF      â”‚  Backend For Frontend (Port: 8090)
â”‚ (Java/Payara)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â†“                 â†“                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚User Service â”‚   â”‚Auth Service â”‚   â”‚Point Serviceâ”‚   â”‚  PostgreSQL â”‚
â”‚ (Port: 8080)â”‚   â”‚ (Port: 8081)â”‚   â”‚ (Port: 8082)â”‚   â”‚ (Port: 5432)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                 â”‚
       â”‚                 â”‚                 â”‚
       â†“                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚user_service_ â”‚   â”‚auth_service_ â”‚   â”‚point_service_â”‚
â”‚     db       â”‚   â”‚     db       â”‚   â”‚     db       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§

| ã‚µãƒ¼ãƒ“ã‚¹         | ãƒãƒ¼ãƒˆ | èª¬æ˜                     | ãƒ‡ãƒãƒƒã‚°ãƒãƒ¼ãƒˆ |
|------------------|-------|--------------------------|---------------|
| Frontend         | 3000  | Vue 3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰      | -             |
| BFF              | 8090  | Backend For Frontend     | 5008          |
| User Service     | 8080  | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†             | 5005          |
| Auth Service     | 8081  | èªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†     | 5006          |
| Point Service    | 8082  | ãƒã‚¤ãƒ³ãƒˆç®¡ç†             | 5007          |
| PostgreSQL       | 5432  | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹             | -             |

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Docker & Docker Compose
- VS Code with Dev Containers extension

### VS Codeãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰

**F5ã‚­ãƒ¼ã¾ãŸã¯ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‹ã‚‰ã€ŒDebug All Servicesã€ã‚’é¸æŠã—ã¦ã€å…¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¸€æ‹¬èµ·å‹•ã§ãã¾ã™ã€‚**

1. **VS Codeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã**
2. **ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‚’é–‹ã**ï¼ˆCtrl+Shift+D / Cmd+Shift+Dï¼‰
3. **ã€ŒDebug All Servicesã€ã‚’é¸æŠ**
4. **F5ã‚­ãƒ¼ã‚’æŠ¼ã™**ã‹ã€ãƒ‡ãƒãƒƒã‚°é–‹å§‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

ã“ã‚Œã«ã‚ˆã‚Šä»¥ä¸‹ãŒè‡ªå‹•çš„ã«èµ·å‹•ã—ã¾ã™ï¼š
- User Serviceï¼ˆ8080ãƒãƒ¼ãƒˆã€ãƒ‡ãƒãƒƒã‚°5005ãƒãƒ¼ãƒˆï¼‰
- Auth Serviceï¼ˆ8081ãƒãƒ¼ãƒˆã€ãƒ‡ãƒãƒƒã‚°5006ãƒãƒ¼ãƒˆï¼‰
- Point Serviceï¼ˆ8082ãƒãƒ¼ãƒˆã€ãƒ‡ãƒãƒƒã‚°5007ãƒãƒ¼ãƒˆï¼‰
- BFFï¼ˆ8090ãƒãƒ¼ãƒˆã€ãƒ‡ãƒãƒƒã‚°5008ãƒãƒ¼ãƒˆï¼‰
- Vue Frontendï¼ˆ3000ãƒãƒ¼ãƒˆï¼‰

å€‹åˆ¥ã®ã‚µãƒ¼ãƒ“ã‚¹ã ã‘ã‚’ãƒ‡ãƒãƒƒã‚°ã™ã‚‹å ´åˆã¯ã€ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‹ã‚‰è©²å½“ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚

### é‡è¦: åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**Maven 3.9.9ï¼ˆJava 11å¯¾å¿œï¼‰ã¨Payara Microã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã€DevContainerã®å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ã§ã™ã€‚**

ğŸ“– **è©³ç´°ãªæ‰‹é †ã¯ [ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](./docs/QUICKSTART.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„**

### èµ·å‹•æ–¹æ³•

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone <repository-url>
cd my-ws-demo
```

2. **Dev Containerã§é–‹ã**
```bash
# VS Codeã§é–‹ã
code .
# ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ (Ctrl+Shift+P) ã‹ã‚‰
# "Dev Containers: Reopen in Container" ã‚’é¸æŠ
```

3. **å„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰**

**é‡è¦**: ã¾ãšDevContainerã‚’å†ãƒ“ãƒ«ãƒ‰ã—ã¦Maven 3.9.9ï¼ˆJava 11å¯¾å¿œï¼‰ã¨Payara Microã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

VS Codeã®ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ (Ctrl+Shift+P) ã‹ã‚‰:
```
Dev Containers: Rebuild Container
```

å†ãƒ“ãƒ«ãƒ‰å¾Œã€å„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰ï¼š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/user-service
mvn clean package
```

èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/auth-service
mvn clean package
```

BFF:
```bash
cd /workspaces/my-ws-demo/src/bff
mvn clean package
```

ãƒã‚¤ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/point-service
mvn clean package
```

4. **å„ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•**

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1 - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/user-service
java -jar /opt/payara-micro.jar --deploy target/user-service.war --port 8080
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2 - èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/auth-service
java -jar /opt/payara-micro.jar --deploy target/auth-service.war --port 8081
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«3 - ãƒã‚¤ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹:
```bash
cd /workspaces/my-ws-demo/src/point-service
java -jar /opt/payara-micro.jar --deploy target/point-service.war --port 8082
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«4 - BFF:
```bash
cd /workspaces/my-ws-demo/src/bff
POINT_SERVICE_URL="http://localhost:8082" java -jar /opt/payara-micro.jar --deploy target/bff.war --port 8090
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«5 - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:
```bash
cd /workspaces/my-ws-demo/src/frontend
npm install
npm run dev
```

5. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹**

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ã

## ğŸ‘¤ ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼

ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯UUIDã§ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ï¼‰:

| UUID | æ°å | ãƒ¦ãƒ¼ã‚¶ãƒ¼å | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ãƒã‚¤ãƒ³ãƒˆ |
|----------|------|-----------|-----------|---------|
| 123e4567-e89b-12d3-a456-426614174000 | ç”°ä¸­å¤ªéƒ | tanaka_taro | password123 | 1500 |
| 123e4567-e89b-12d3-a456-426614174001 | éˆ´æœ¨èŠ±å­ | suzuki_hanako | password123 | 2300 |
| 123e4567-e89b-12d3-a456-426614174002 | å±±ç”°æ¬¡éƒ | yamada_jiro | password123 | 500 |
| 123e4567-e89b-12d3-a456-426614174003 | ä½è—¤å„ªå¸Œ | sato_yuki | password123 | 3200 |
| 123e4567-e89b-12d3-a456-426614174004 | é«˜æ©‹èˆ | takahashi_mai | password123 | 1000 |

**ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼åã§: `tanaka_taro` + `password123`
- UUIDã§: `123e4567-e89b-12d3-a456-426614174000` + `password123`

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
my-ws-demo/
â”œâ”€â”€ .devcontainer/          # Dev Containerè¨­å®š
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ init-db.sql
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ user-service/       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.sql
â”‚   â”‚   â”‚   â””â”€â”€ seed.sql
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”œâ”€â”€ auth-service/       # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.sql
â”‚   â”‚   â”‚   â””â”€â”€ seed.sql
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â””â”€â”€ bff/                # Backend For Frontend
â”‚       â”œâ”€â”€ src/
â”‚       â””â”€â”€ pom.xml
â”œâ”€â”€ frontend/               # Vue 3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â””â”€â”€ docs/                   # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- Java 11
- Jakarta EE 8
- Payara Micro
- PostgreSQL
- Maven

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- Vue 3
- Vue Router
- Axios
- Tailwind CSS
- Vite

### ã‚¤ãƒ³ãƒ•ãƒ©
- Docker
- Docker Compose
- Dev Containers

## ğŸ“š API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### BFF API (Port 8090)

#### èªè¨¼
- `POST /api/login` - ãƒ­ã‚°ã‚¤ãƒ³
- `POST /api/logout` - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- `GET /api/verify` - ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `GET /api/account` - è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±å–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰
- `GET /api/users` - å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰
- `GET /api/users/{id}` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰
- `GET /api/users/{id}/points` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¤ãƒ³ãƒˆå–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰

#### ãƒã‚¤ãƒ³ãƒˆæƒ…å ±
- `GET /api/points` - è‡ªåˆ†ã®ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜å–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰
- `GET /api/points/history` - è‡ªåˆ†ã®ãƒã‚¤ãƒ³ãƒˆå±¥æ­´å–å¾—ï¼ˆèªè¨¼å¿…è¦ï¼‰

è©³ç´°ãªAPIä»•æ§˜ã¯å„ã‚µãƒ¼ãƒ“ã‚¹ã®READMEã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### æ¥ç¶šæƒ…å ±

```
Host: localhost
Port: 5432
User: postgres
Password: postgres
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§

- `user_service_db` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `auth_service_db` - èªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±
- `point_service_db` - ãƒã‚¤ãƒ³ãƒˆæƒ…å ±

## ğŸ› ï¸ é–‹ç™º

### å„ã‚µãƒ¼ãƒ“ã‚¹ã®å†ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹
cd src/user-service && mvn clean package

# èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹
cd src/auth-service && mvn clean package

# ãƒã‚¤ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹
cd src/point-service && mvn clean package

# BFF
cd src/bff && mvn clean package
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™º

```bash
cd frontend
npm run dev    # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run build  # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
```

## ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°](./docs/architecture.md)
- [User Service README](./src/user-service/README.md)
- [Auth Service README](./src/auth-service/README.md)
- [BFF README](./src/bff/README.md)

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
